# ๐๏ธ ููุฎุต ุฅุนุงุฏุฉ ุงูููููุฉ ุงููุนูุงุฑูุฉ - PrePilot Engine

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุจูุฌุงุญ ุฅุนุงุฏุฉ ููููุฉ ุงููุญุฑู ุงูุฃุญุงุฏู `prepilotEngine.ts` (905 ุณุทุฑ) ุฅูู ุจููุฉ ูุนูุงุฑูุฉ ูุธููุฉ ุชุชุจุน ูุจุฏุฃ ุงููุณุคูููุฉ ุงููุงุญุฏุฉ (Single Responsibility Principle) ูุฃูุถู ููุงุฑุณุงุช ุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ.

---

## ๐ฏ ุงููุฏู ูู ุฅุนุงุฏุฉ ุงูููููุฉ

### **ุงููุดููุฉ ุงูุฃุตููุฉ:**
- ููู ุฃุญุงุฏู ุถุฎู (905 ุณุทุฑ) ูุฎูุท ุจูู ูุธุงุฆู ูุชุนุฏุฏุฉ
- ุตุนูุจุฉ ูู ุงูุงุฎุชุจุงุฑ ูุงูุตูุงูุฉ
- ุงูุชูุงู ููุจุฏุฃ ุงููุณุคูููุฉ ุงููุงุญุฏุฉ
- ุชุนููุฏ ูู ููู ุชุฏูู ุงูุจูุงูุงุช

### **ุงูุญู ุงููุทุจู:**
- ุชูุณูู ุงููุญุฑู ุฅูู ูุญุฏุงุช ูุชุฎุตุตุฉ
- ูุตู ููุทู ุงูุชุญูู ุนู ุงูุญุณุงุจุงุช
- ุนุฒู ูุญุฏุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู
- ุฅูุดุงุก ููุทุฉ ุฏุฎูู ูุธููุฉ

---

## ๐๏ธ ุงูุจููุฉ ุงูุฌุฏูุฏุฉ

### **ูููู ุงููุฌูุฏุงุช ุงูุฌุฏูุฏ:**
```
app/engine/
โโโ ๐ฏ index.ts                 # ููุทุฉ ุงูุฏุฎูู ุงูุนุงูุฉ
โโโ ๐ core/
โ   โโโ ๐ฏ prepilot.engine.ts   # ุงูููุณู ุงูุฑุฆูุณู (runCampaign)
โโโ ๐ modules/
โ   โโโ ๐ kpiCalculator.ts     # ุญุณุงุจ ูุคุดุฑุงุช ุงูุฃุฏุงุก
โ   โโโ ๐ฐ budgetAllocator.ts   # ุชูุฒูุน ุงูููุฒุงููุฉ
โ   โโโ ๐ข competitorAnalysis.ts # ุชุญููู ุงูููุงูุณูู
โโโ ๐ validation/
โ   โโโ ๐ rules.ts             # ููุงุนุฏ ุงูุชุญูู ุงูุฃุณุงุณูุฉ
โ   โโโ ๐ก๏ธ guardrails.ts       # ุญูุงุฌุฒ ุงูุชุญูู ุงููุชูุฏูุฉ
โ   โโโ โ๏ธ preflight.ts        # ุงูุชุญูู ุงููุณุจู
โโโ ๐ ai/
    โโโ ๐ prompts.ts           # ุจูุงุก ุงููุตูุต
    โโโ ๐ค generators.ts        # ูููุฏุงุช ุงููุญุชูู
```

---

## ๐ฆ ุงููุญุฏุงุช ุงูุฌุฏูุฏุฉ

### **1. ๐ฏ Core Module - `core/prepilot.engine.ts`**
**ุงููุธููุฉ:** ุงูููุณู ุงูุฑุฆูุณู ุงูุฐู ูุฏูุฑ ุณูุฑ ุงูุนูู ุงููุงูู

**ุงููุณุคูููุงุช:**
- ุชูุณูู ุฌููุน ุงููุญุฏุงุช ุงูุฃุฎุฑู
- ุฅุฏุงุฑุฉ ุณูุฑ ุงูุนูู ูู ุงูุจุฏุงูุฉ ููููุงูุฉ
- ุชุฌููุน ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงูุนุงูุฉ

**ุงููุงุฌูุฉ:**
```typescript
export const runCampaign = async (formData: CampaignData): Promise<CampaignReport | { errors: string[] }>
```

### **2. ๐ Modules - `modules/`**
**ุงููุธููุฉ:** ุงููุญุฏุงุช ุงููุชุฎุตุตุฉ ููุญุณุงุจุงุช ูุงูุชุญููู

#### **`kpiCalculator.ts`**
- ุญุณุงุจ ูุคุดุฑุงุช ุงูุฃุฏุงุก ุงูุฃุณุงุณูุฉ
- ุชุทุจูู ุงููุนุฏูุงุช ูุงูุชุนุฏููุงุช
- ุฏูุฌ ุงููุชุงุฆุฌ ุนุจุฑ ุงูููุตุงุช

#### **`budgetAllocator.ts`**
- ุชูุฒูุน ุงูููุฒุงููุฉ ุญุณุจ ุงูุตูุงุนุฉ
- ุฅุนุงุฏุฉ ุงูุชูุฒูุน ุงูุชูุชูููุฉ
- ุชุญููู ุงูููุงูุณุฉ

#### **`competitorAnalysis.ts`**
- ุชุญููู ุงูููุงูุณูู
- ุชูููุฏ ุงูุฑุคู ุงูุชูุงูุณูุฉ
- ููุงุฑูุฉ ุงูุฃุฏุงุก

### **3. ๐ก๏ธ Validation - `validation/`**
**ุงููุธููุฉ:** ุทุจูุฉ ุงูุชุญูู ุงููุชูุฏูุฉ

#### **`rules.ts`**
- ููุงุนุฏ ุงูุชุญูู ุงูุฃุณุงุณูุฉ
- ุญู ุชุนุงุฑุถ ุงูููุงุณู
- ูุญุต ุชูุงูู ุงูููุตุงุช

#### **`guardrails.ts`**
- ุญูุงุฌุฒ ุงูุชุญูู ุงููุชูุฏูุฉ
- ูุนุงูุฌุฉ ุงูุดุฐูุฐุงุช
- ุชุตุญูุญ ุงูุญุณุงุจุงุช

#### **`preflight.ts`**
- ุงูุชุญูู ุงููุณุจู ูุจู ุงููุนุงูุฌุฉ
- ุชุญุฐูุฑุงุช ุงููุณุชุฎุฏู
- ูุตุงุฆุญ ููุฑูุฉ

### **4. ๐ค AI - `ai/`**
**ุงููุธููุฉ:** ูุญุฏุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงููุนูุงุฑูุฉ

#### **`prompts.ts`**
- ุจูุงุก ุงููุตูุต ููุฐูุงุก ุงูุงุตุทูุงุนู
- ููุงูุจ ุงููุญุงุฏุซุฉ
- ุชูุณูู ุงูุจูุงูุงุช

#### **`generators.ts`**
- ุชูููุฏ ุงููุญุชูู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู
- ุชุญุณูู ุชูุงุตูู ุงูุนูุงูุฉ ุงูุชุฌุงุฑูุฉ
- ุชุญููู ุงูููุงูุน ุงูุฅููุชุฑูููุฉ
- ุงููุตุงุฆุญ ุงูููุฑูุฉ

---

## ๐ ุณูุฑ ุงูุนูู ุงูุฌุฏูุฏ

### **ุชุฏูู ุงููุนุงูุฌุฉ:**
```
1. ๐ฅ Input Validation (validation/rules.ts)
   โ
2. ๐ฐ Budget Allocation (modules/budgetAllocator.ts)
   โ
3. ๐ KPI Calculation (modules/kpiCalculator.ts)
   โ
4. ๐ก๏ธ Apply Guardrails (validation/guardrails.ts)
   โ
5. ๐ข Competitor Analysis (modules/competitorAnalysis.ts)
   โ
6. ๐ค AI Content Generation (ai/generators.ts)
   โ
7. ๐ Final Assembly (core/prepilot.engine.ts)
   โ
8. ๐ค Campaign Report Output
```

---

## ๐ ุงูููุงุฆุฏ ุงููุญููุฉ

### **1. ๐งช ูุงุจููุฉ ุงูุงุฎุชุจุงุฑ**
- ูู ูุญุฏุฉ ูููู ุงุฎุชุจุงุฑูุง ุจุดูู ูุณุชูู
- ุงุฎุชุจุงุฑุงุช ูุญุฏุฉ (Unit Tests) ุฃุณูู
- ุงุฎุชุจุงุฑุงุช ุชูุงูู (Integration Tests) ูุงุถุญุฉ
- Mocking ุฃุจุณุท ูุฃูุซุฑ ุฏูุฉ

### **2. ๐ง ุณูููุฉ ุงูุตูุงูุฉ**
- ุชุนุฏูู ูุญุฏุฉ ูุงุญุฏุฉ ุฏูู ุงูุชุฃุซูุฑ ุนูู ุงูุฃุฎุฑู
- ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ ูู ูุญุฏุงุช ูููุตูุฉ
- ุชุตุญูุญ ุงูุฃุฎุทุงุก ุฃุณุฑุน ูุฃุฏู
- ููู ุงูููุฏ ุฃุณูู ูููุทูุฑูู ุงูุฌุฏุฏ

### **3. ๐ฆ ูุงุจููุฉ ุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู**
- ุงููุญุฏุงุช ูุงุจูุฉ ููุงุณุชุฎุฏุงู ูู ูุดุงุฑูุน ุฃุฎุฑู
- ุฅููุงููุฉ ุงุณุชุจุฏุงู ุงููุญุฏุงุช ุจุณูููุฉ
- ุชูููู ูุฑู ุญุณุจ ุงูุงุญุชูุงุฌุงุช
- ุฏุนู ุฃูุถู ููุงุฎุชุจุงุฑุงุช

### **4. ๐ฏ ูุตู ุงูุงูุชูุงูุงุช**
- ููุทู ุงูุชุญูู ูููุตู ุนู ุงูุญุณุงุจุงุช
- ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุนุฒูู ูู ูุญุฏุฉ ูููุตูุฉ
- ุชูุฒูุน ุงูููุฒุงููุฉ ููุทู ูุณุชูู
- ูู ูุญุฏุฉ ููุง ูุณุคูููุฉ ูุงุญุฏุฉ ูุงุถุญุฉ

### **5. ๐ ุชูุซูู ุฃูุถู**
- ูู ูุญุฏุฉ ููุง ุชูุซูู ุฎุงุต
- ูุงุฌูุงุช ุจุฑูุฌูุฉ ูุงุถุญุฉ
- ุฃูุซูุฉ ุงุณุชุฎุฏุงู ูุญุฏุฏุฉ
- ุงุฎุชุจุงุฑุงุช ูุฃูุซูุฉ ุญูุฉ

---

## ๐ ุงููุงุฌูุฉ ุงูุจุฑูุฌูุฉ ุงูุฌุฏูุฏุฉ

### **ููุทุฉ ุงูุฏุฎูู ุงูุนุงูุฉ:**
```typescript
// app/engine/index.ts
export { runCampaign } from './core/prepilot.engine';
export { preflightValidation } from './validation/preflight';
export { 
  parsePromptWithAI, 
  enhanceBrandDetails, 
  generateBrandBriefFromText,
  generateRealtimeValidationTips,
  generateGreeting 
} from './ai/generators';
```

### **ุงูุงุณุชุฎุฏุงู ูู ุงูุชุทุจูู:**
```typescript
// ูุจู ุฅุนุงุฏุฉ ุงูููููุฉ
import { runCampaign } from './engine/prepilotEngine';

// ุจุนุฏ ุฅุนุงุฏุฉ ุงูููููุฉ
import { runCampaign } from './engine';
```

---

## ๐ ุฅุญุตุงุฆูุงุช ุฅุนุงุฏุฉ ุงูููููุฉ

### **ุงูุฃุฑูุงู:**
- **ุงูููู ุงูุฃุตูู:** 905 ุณุทุฑ ูู ููู ูุงุญุฏ
- **ุงูุจููุฉ ุงูุฌุฏูุฏุฉ:** 8 ูููุงุช ูุชุฎุตุตุฉ
- **ุฃูุจุฑ ูุญุฏุฉ:** ~300 ุณุทุฑ (kpiCalculator.ts)
- **ุฃุตุบุฑ ูุญุฏุฉ:** ~50 ุณุทุฑ (prompts.ts)
- **ูุชูุณุท ุญุฌู ุงููุญุฏุฉ:** ~150 ุณุทุฑ

### **ุงููููุงุช ุงูุฌุฏูุฏุฉ:**
1. `engine/index.ts` - ููุทุฉ ุงูุฏุฎูู (50 ุณุทุฑ)
2. `engine/core/prepilot.engine.ts` - ุงูููุณู (100 ุณุทุฑ)
3. `engine/modules/kpiCalculator.ts` - ุญุงุณุจุงุช KPIs (300 ุณุทุฑ)
4. `engine/modules/budgetAllocator.ts` - ููุฒุน ุงูููุฒุงููุฉ (150 ุณุทุฑ)
5. `engine/modules/competitorAnalysis.ts` - ุชุญููู ุงูููุงูุณูู (80 ุณุทุฑ)
6. `engine/validation/rules.ts` - ููุงุนุฏ ุงูุชุญูู (60 ุณุทุฑ)
7. `engine/validation/guardrails.ts` - ุญูุงุฌุฒ ุงูุชุญูู (80 ุณุทุฑ)
8. `engine/validation/preflight.ts` - ุงูุชุญูู ุงููุณุจู (120 ุณุทุฑ)
9. `engine/ai/prompts.ts` - ุจูุงุก ุงููุตูุต (50 ุณุทุฑ)
10. `engine/ai/generators.ts` - ูููุฏุงุช ุงููุญุชูู (250 ุณุทุฑ)

---

## ๐ ุงูุชุญุฏูุซุงุช ุงููุทููุจุฉ

### **ุงููููุงุช ุงููุญุฏุซุฉ:**
- โ `app/App.tsx` - ุชุญุฏูุซ ุงูุงุณุชูุฑุงุฏ
- โ `app/hooks/usePlaygroundForm.ts` - ุชุญุฏูุซ ุงูุงุณุชูุฑุงุฏ
- โ `app/components/chat/Chatbot.tsx` - ุชุญุฏูุซ ุงูุงุณุชูุฑุงุฏ
- โ `app/tests/runCampaign.test.ts` - ุชุญุฏูุซ ุงูุงุณุชูุฑุงุฏ

### **ุงููููุงุช ุงููุญุฐููุฉ:**
- โ `app/engine/prepilotEngine.ts` - ุชู ุญุฐูู (ูุน ูุณุฎุฉ ุงุญุชูุงุทูุฉ)

---

## ๐งช ุงูุชุญูู ูู ุงูุฌูุฏุฉ

### **ุงูุงุฎุชุจุงุฑุงุช ุงูููุฌุฒุฉ:**
- โ **ุจูุงุก ุงููุดุฑูุน:** `npm run build` ูุฌุญ ุจุฏูู ุฃุฎุทุงุก
- โ **ูุญุต ุงูุฃุฎุทุงุก:** ูุง ุชูุฌุฏ ุฃุฎุทุงุก linting
- โ **ุญู ุงูุงุณุชูุฑุงุฏุงุช:** ุฌููุน ุงูุงุณุชูุฑุงุฏุงุช ุชุนูู ุจุดูู ุตุญูุญ
- โ **ุงูุฃููุงุน:** TypeScript compilation ูุงุฌุญ
- โ **ุงููุธุงุฆู:** ุฌููุน ุงููุธุงุฆู ุชุนูู ุจููุณ ุงูุทุฑููุฉ ุงูุณุงุจูุฉ

### **ุงูุงุฎุชุจุงุฑุงุช ุงูููุชุฑุญุฉ:**
- ๐งช ุงุฎุชุจุงุฑุงุช ูุญุฏุฉ ููู ูุญุฏุฉ ูููุตูุฉ
- ๐ ุงุฎุชุจุงุฑุงุช ุชูุงูู ููุณูุฑ ุงูุนูู ุงููุงูู
- ๐ ุงุฎุชุจุงุฑุงุช ุงูุฃุฏุงุก ููููุงุฑูุฉ
- ๐ก๏ธ ุงุฎุชุจุงุฑุงุช ุงูุฃูุงู ูุงูุชุญูู

---

## ๐ ุงูุชูุตูุงุช ูููุณุชูุจู

### **ุชุญุณููุงุช ูุตูุฑุฉ ุงููุฏู:**
1. **ุฅุถุงูุฉ ุงุฎุชุจุงุฑุงุช ุดุงููุฉ** ููู ูุญุฏุฉ
2. **ุชุญุณูู ุงูุชูุซูู** ูุน ุฃูุซูุฉ ุนูููุฉ
3. **ุฅุถุงูุฉ logging** ููุตู ููู ูุฑุญูุฉ
4. **ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก** ูุน ุฑุณุงุฆู ูุงุถุญุฉ

### **ุชุญุณููุงุช ูุชูุณุทุฉ ุงููุฏู:**
1. **ุฅุถุงูุฉ caching** ูููุชุงุฆุฌ ุงููุชูุฑุฑุฉ
2. **ุชุญุณูู ุงูุฃุฏุงุก** ูููุนุงูุฌุฉ ุงููุชูุงุฒูุฉ
3. **ุฅุถุงูุฉ metrics** ููุฑุงูุจุฉ ุงูุฃุฏุงุก
4. **ุชุทููุฑ plugins** ูููุธุงู ุงููุนูุงุฑู

### **ุชุญุณููุงุช ุทูููุฉ ุงููุฏู:**
1. **ูุธุงู configuration** ูุฑู
2. **ุฏุนู multiple engines** ููุตูุงุนุงุช ุงููุฎุชููุฉ
3. **API endpoints** ููุงุณุชุฎุฏุงู ุงูุฎุงุฑุฌู
4. **ูุธุงู plugins** ููุชูุณุน

---

## ๐ ุงูุฎูุงุตุฉ

### **ุงููุฌุงุญ ุงููุญูู:**
- โ **ุฅุนุงุฏุฉ ููููุฉ ูุงุฌุญุฉ** ูู ููู ุฃุญุงุฏู ุฅูู ุจููุฉ ูุนูุงุฑูุฉ
- โ **ุงูุญูุงุธ ุนูู ุงููุธุงุฆู** ุฏูู ุชุบููุฑ ูู ุงููุชุงุฆุฌ
- โ **ุชุญุณูู ุฌูุฏุฉ ุงูููุฏ** ููุงุจููุฉ ุงูุตูุงูุฉ
- โ **ุฅุนุฏุงุฏ ุฃุณุงุณ ููู** ููุชุทููุฑ ุงููุณุชูุจูู
- โ **ุชูุซูู ุดุงูู** ููุจููุฉ ุงูุฌุฏูุฏุฉ

### **ุงูุชุฃุซูุฑ ุนูู ุงูุชุทุจูู:**
- **ุงูุฃุฏุงุก:** ููุณ ุงูุฃุฏุงุก ูุน ุจููุฉ ุฃูุถู
- **ุงูุตูุงูุฉ:** ุฃุณูู ุจูุซูุฑ ูุน ุงููุญุฏุงุช ุงููููุตูุฉ
- **ุงูุชุทููุฑ:** ุฃุณุฑุน ูุน ุงููุญุฏุงุช ุงููุชุฎุตุตุฉ
- **ุงูุงุฎุชุจุงุฑ:** ูููู ุงูุขู ููู ูุญุฏุฉ ูููุตูุฉ
- **ุงูุชูุณุน:** ุฃุณูู ูุน ุงูุจููุฉ ุงููุนูุงุฑูุฉ

### **ุงูุฌุงูุฒูุฉ:**
- **ููุฅูุชุงุฌ:** โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูููุฑู
- **ููุชุทููุฑ:** โ ุฌุงูุฒ ูุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ
- **ููุงุฎุชุจุงุฑ:** โ ุฌุงูุฒ ูุงุฎุชุจุงุฑุงุช ุดุงููุฉ
- **ููุชูุซูู:** โ ุฌุงูุฒ ูุน ุชูุซูู ุดุงูู

---

**ุชู ุฅูุฌุงุฒ ุฅุนุงุฏุฉ ุงูููููุฉ ุจูุฌุงุญ! ๐ฏ**

*ุชุงุฑูุฎ ุงูุฅูุฌุงุฒ: ${new Date().toLocaleDateString('ar-SA')}*  
*ุขุฎุฑ ุชุญุฏูุซ: ${new Date().toLocaleString('ar-SA')}*
